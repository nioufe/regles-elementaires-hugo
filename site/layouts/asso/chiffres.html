{{ define "main" }}
<div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.3.2/chart.min.js"></script>
    {{ partial "page-desc" . }}
    <div class="w-11/12 mx-auto">
        <div class="w-10/12 md:w-3/5 m-auto flex flex-col items-center mt-4 md:mt-12 mb-6 md:mb-10 text-rered tracking-tight">
            <h2 class="uppercase font-extrabold text-xl md:text-3xl mb-4 md:mb-8">{{ .Params.origine.title }}</h2>
            <p class="text-center">{{ .Params.origine.text_first }}</p>
            <p class="mt-2 text-center">{{ .Params.origine.text_second | markdownify }}</p>
        </div>
        <div class="w-full md:w-5/6 m-auto flex flex-col flex-wrap tracking-tight ">
            <div class="w-full flex flex-row flex-wrap">
                <div class="w-full md:w-5/12 mb-6 md:mb-0 md:pr-3 text-rered">
                    <div class="bg-rebeige rounded-xl h-full p-8 md:p-12">
                        {{ partial "projet/big-title" (dict "title" .Params.precarite.title "size" "2xl") }}
                        <p class="mt-4 ml-2">{{ .Params.precarite.text }}</p>
                    </div>                    
                </div>
                <div class="w-full md:w-7/12 text-white md:pl-3">
                    <div class="bg-rered rounded-xl h-full p-8 md:p-12">
                        <h3 class="font-bold text-lg md:text-2xl mb-2">{{ .Params.precarite.chiffre_title }}</h3>
                        <div class="flex flex-row flex-wrap">
                            <p class="w-full md:w-3/4 pr-4">{{ .Params.precarite.chiffre_text }}</p>
                            <img class="w-full max-h-40 md:max-h-max md:w-1/4" src="/img/page-chiffres/cup.svg" alt="illustration précarité">
                        </div>                        
                    </div>                    
                </div>
            </div>
            <div class="w-full flex flex-row flex-wrap mt-6">
                <div class="w-full md:w-5/12 mb-6 md:mb-0 md:pr-3 text-rered">
                    <div class="bg-rebeige rounded-xl h-full p-8 md:p-12">
                        {{ partial "projet/big-title" (dict "title" .Params.tabou.title "size" "2xl") }}
                        <p class="mt-4 ml-2">{{ .Params.tabou.text | markdownify }}</p>
                    </div>                    
                </div>
                <div class="w-full md:w-7/12 text-white md:pl-3">
                    <div class="bg-rered rounded-xl h-full px-8 md:px-12 flex flex-col justify-between items-center">
                        <h3 class="w-full md:w-2/3 mx-auto text-center font-bold text-lg md:text-2xl mt-8 md:mt-12">{{ .Params.tabou.chiffre_title }}</h3>
                        <div class="w-full">
                            <img class="w-full" src="/img/page-chiffres/tabou.svg" alt="illustration tabou">
                        </div>                        
                    </div>                    
                </div>
            </div>
            <div class="flex flex-row flex-wrap text-white text-center mt-4">
                {{ range $i,$p := .Params.study }}
                <div class="w-full md:w-1/4 pt-4 {{ if eq $i 0 }} md:pr-2 {{ else if eq $i 3 }} md:pl-2 {{ else }} md:px-2 {{ end }}">
                    <div class="h-full bg-rered rounded-lg p-8">
                        <h3 class="uppercase font-bold text-3xl md:text-5xl">{{ $p.number }}</h3>
                        <p class="mt-4">{{ $p.text }}</p>
                    </div>
                </div>
                {{ end }}
            </div>
            <div class="text-center">
                <p class="mt-4 text-stone-700 font-medium text-sm"><a href="/actualites/2023-03-06_le-nombre-de-femmes-en-situation-de-précarité-menstruelle-a-doublé/">{{ $.Params.study_source2 }}</a></p>
                <p class="mt-4 text-stone-700 font-medium text-sm"><a href="/actualites/2022-05-27_baromètre-exclusif-2022-opinion-way-x-règles-élémentaires/">{{ $.Params.study_source }}</a></p>
            </div>   
            <div class="text-center text-rered mt-8 mb-12">
                <h2 class="uppercase font-extrabold text-xl md:text-3xl">{{ .Params.study_title }}</h2>
                <p class="mt-4 mb-6">{{ .Params.study_text }}</p>
                <div class="mb-6">
                    <a class="bg-rered text-white uppercase py-2 px-6 text-center rounded-full" href="/actualites/2023-03-06_le-nombre-de-femmes-en-situation-de-précarité-menstruelle-a-doublé/">
                        {{ .Params.study_button2 }}
                    </a>
                </div>
                <div>
                    <a class="bg-rered text-white uppercase py-2 px-6 text-center rounded-full" href="/actualites/2022-05-27_baromètre-exclusif-2022-opinion-way-x-règles-élémentaires/">
                        {{ .Params.study_button }}
                    </a>
                </div>
            </div>         
        </div>    
    </div>

    <div class="bg-rebeige">
        <div class="w-11/12 md:w-5/6 mx-auto pt-8 pb-16">
            <h2 class="text-center text-xl md:text-3xl mt-8 mb-2 uppercase font-extrabold text-rered px-8">{{.Params.numbers.title}}</h2>
            <p class="text-center text-rered px-8 font-medium tracking-tight">{{.Params.numbers.content}}</p>
            <div class="flex flex-wrap justify-center">
                {{ range $elem_index, $elem_val := .Params.numbers.cards }}
                    <div class="w-full sm:w-1/2 md:w-1/3 relative px-8 py-12">
                        <div class="absolute inset-x-0 px-8">
                            <div class="flex flex-col items-center w-full"><img class="h-24" src="{{ .img }}" alt=""/></div>
                        </div>
                        <div class="bg-reorange h-full text-white mt-12 pt-12 -mb-6 text-center rounded-lg px-4">
                            <h3 class="text-2xl md:text-4xl font-bold mt-2">{{.number}}</h3>
                            <p class="mt-2">{{.desc}}</p>
                        </div>
                    </div>
                {{end}}                    
            </div>

            <div class="w-full mx-auto bg-reorange rounded-xl flex flex-row flex-wrap mt-16">
                <div class="w-full md:w-3/5 flex flex-col items-start px-8 pt-8 pb-4 md:pt-12 md:pb-12">
                    {{ partial "projet/big-title-white" (dict "title" .Params.rapport.title "size" "2xl") }}
                    <div class="ml-2 mt-4 text-white markdown tracking-tight font-medium">
                        {{.Params.rapport.content | markdownify}}
                    </div>
                    <a class="ml-2 text-reorange uppercase py-1.5 px-4 text-center rounded-full mt-8 mb-4 text-sm" href="{{.Params.rapport.button.link}}" style="background-color: rgb(255, 245, 230);" target="_blank">
                        {{.Params.rapport.button.text}}
                    </a>
                </div>
                <div class="w-full md:w-2/5 flex justify-center items-center pb-4">
                    <img src="{{.Params.rapport.illu}}" alt="illu {{.Params.rapport.title}}" />
                </div>
            </div>
            
            <div class="flex flex-col items-center mt-16">
                <div class="w-full md:w-2/3 mx-auto bg-white py-4 md:py-6 px-2 md:px-4 rounded-xl">
                    <h3 class="text-center text-rered md:text-lg font-medium tracking-tight mb-4">
                        {{.Params.collectes.title}}
                    </h3>
                    <canvas id="myChart" width="400" height="200"></canvas>
                </div>
            </div>              
        </div>
    </div>
    
    <script>
        const data = {
            labels: [
                "2015",
                "2016",
                "2017",
                "2018",
                "2019",
                "2020",
                "2021",
                "2022"
            ],
            datasets: [
                {
                    label: 'Nombre de protections collectées',
                    data: [20000, 100000, 200000, 400000, 1500000, 3600000, 10000000, 15400000],
                    borderColor: "#e9364b",
                    backgroundColor: "#FFE4DD",
                    fill: "start",
                    tension: 0.1
                }
            ]
        };

        var ctx = document.getElementById('myChart');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: data,
            options: {
                plugins: {
                    filler: {
                        propagate: false,
                    },
                    title: {
                        display: false,
                        text: "Produits d'hygiène intime collectés par Règles Élémentaires"
                    },
                    legend: {
                        display: false,
                    }
                },
                interaction: {
                    intersect: false,
                },
                scales: {
                    x: {
                        ticks: {
                            color: '#e9364b',
                        },
                        grid: {
                            //display: false,
                            //drawBorder: false
                        }
                    },
                    y: {
                        ticks: {
                            color: '#e9364b'
                        },
                        grid: {
                            //display: false
                        }
                    }
                }
            }
        });
    </script>
</div>
{{ end }}