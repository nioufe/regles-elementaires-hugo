{{ define "main" }}
<div>
    {{ partial "page-desc" . }}

    <div class="w-11/12 md:w-5/6 mx-auto mb-4">
        <div class="flex flex-wrap justify-center">
            {{ range .Params.steps }}
            <div class="w-1/1 sm:w-1/2 md:w-1/3 lg:w-1/4 relative px-8 pt-12 flex flex-row">
                <div class="absolute inset-x-0 px-8">
                    <div class="flex flex-col items-center w-full"><img class="h-32" src="{{.img}}" alt=""/></div>
                </div>
                <div class="mt-16 pt-20 mb-8 pb-8 text-center rounded-lg px-4 bg-rered text-white flex-grow">
                    <p class="collecte_step__text text-center tracking-tighter font-medium">{{.text | markdownify}}</p>
                </div>
                <div class="absolute inset-x-0 px-4 bottom-0">
                    <div class="flex flex-col items-center w-full">
                        <div class="h-12 bg-reorange w-12 rounded-full flex flex-row justify-center items-center">
                            <div class="text-2xl flex font-bold text-white">{{.step}}</div>
                        </div>
                    </div>
                </div>
            </div>
            {{end}}
        </div>
    </div>

    <div class="flex justify-center">
        <a class="big-red-button big-red-button--rounded my-12"  target="_blank" href="https://partenaire.regleselementaires.com/account/register_partner">
            Devenir partenaire
        </a>
    </div>

    <div class="w-11/12 mx-auto py-8 bg-white">
        <div class="py-8 bg-white">
            {{ partial "projet/partenaire-type" (dict "page" .Params.redistributeurs "data" .Site.Data.partenaires)}}
        </div>
    </div>

    <div class="w-11/12 md:w-3/4 mx-auto flex flex-col md:flex-row mb-8 md:mb-12 justify-center">
        {{ range .Params.photos }}
        <div class="flex px-4 py-2">
            <img src="{{.img}}"  alt=""/>
        </div>
        {{ end }}
    </div>

    <script>
        function displayAllPartners(button) {
            const carousel_id = "carousel-" + button.dataset.type;
            const list_id = "full-" + button.dataset.type + "-list";
            document.getElementById(carousel_id).parentNode.classList.add("hidden");
            button.parentNode.classList.add("hidden");
            document.getElementById(list_id).classList.remove("h-0", "opacity-0", "hidden");
            document.getElementById(list_id).classList.add("py-8");
        }
    </script>
</div>
{{ end }}